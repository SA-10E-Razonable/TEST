<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>Match Your Beat</title>

	<link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
	<script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

	<style>
		body {
			font-family: 'HK Modular', sans-serif;
			background: url("background.png");
			background-size:100% 103%;
			min-height: 100vh;
			margin: 0;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		#container {
			max-width: 1200px;
		}

		#input-row-energy, #input-row-tempo {
			display: flex;
			align-items: center;
			margin-bottom: 30px;
		}

		#circle-energy {
			width: 180px;
			height: 180px;
			border-radius: 50%;
			background: #2d94af;
			color: white;
			font-size: 2rem;
			font-weight: 700;
			line-height: 1.2;
			display: flex;
			align-items: center;
			justify-content: center;
			text-align: center;
			z-index: 2;
			margin-top:-100px;
		}

		#circle-tempo {
			width: 180px;
			height: 180px;
			border-radius: 50%;
			background: #2d94af;
			color: white;
			font-size: 2rem;
			font-weight: 700;
			line-height: 1.2;
			display: flex;
			align-items: center;
			justify-content: center;
			text-align: center;
			z-index: 2;
		}

		#bar-energy {
			width: 600px;
			height: 140px;
			margin-left:-100px;
			border-radius: 60px;
			border: 4px solid #0b2f33;
			background: white;
			font-size: 2.2rem;
			text-align: center;
			color: #083335;
			margin-top:-100px;
		}

		#bar-tempo {
			width: 600px;
			height: 140px;
			margin-left: -100px;
			border-radius: 60px;
			border: 4px solid #0b2f33;
			background: white;
			font-size: 2.2rem;
			text-align: center;
			color: #083335;
		}

		#bar-energy::placeholder, #bar-tempo::placeholder {
			color: #9aaeb0;
			font-weight: 500;
		}

		/* NEW: result text style */
		.result-text {
			color: #c24b3b;
			font-weight: bold;
			font-size: 2rem;
		}
	</style>
</head>

<body>
	<div id="container">
		<div id="input-row-energy">
			<div id="circle-energy">
				ENERGY<br>LEVEL
			</div>
			<input
				id="bar-energy"
				type="number"
				placeholder="1â€“100">
		</div>

		<div id="input-row-tempo">
			<div id="circle-tempo">
				TEMPO<br>LEVEL
			</div>
			<input
				id="bar-tempo"
				type="number"
				placeholder="1â€“100">
		</div>

		<div id="view-results" style="
			color: #c24b3b;
			font-weight: bold;
			font-size: 2.7rem;
			cursor: pointer;
			margin-left:1000px;
			margin-top:-350px;
			text-align: center;
		" py-click="show_results()">
			View Results
		</div>
	</div>

<py-script>
from pyscript import document, when

@when("click", "#view-results")
def show_results(e=None):
    try:
        energy = float(document.getElementById("bar-energy").value)
        tempo = float(document.getElementById("bar-tempo").value)
    except ValueError:
        display_result("Please enter valid numbers!")
        return

    if energy < 0 or energy > 100 or tempo < 0 or tempo > 100:
        display_result("Values must be between 0 and 100!")
        return

    beat = (energy + tempo) / 2

    if beat <= 40:
        style = "Chill / Lo-Fi ðŸŽ§"
    elif beat <= 70:
        style = "Pop ðŸŽµ"
    elif beat <= 90:
        style = "Rock ðŸ”¥"
    else:
        style = "EDM âš¡"

    display_result(f"You match the beat: {style}")

def display_result(text):
    btn = document.getElementById("view-results")
    result_div = btn.nextElementSibling
    if result_div is None or result_div.id != "result":
        result_div = document.createElement("div")
        result_div.id = "result"
        result_div.className = "result-text"  # apply the new style class
        result_div.style.marginTop = "10px"
        btn.parentNode.insertBefore(result_div, btn.nextSibling)
    result_div.innerText = text
</py-script>

</body>
</html>


